'use strict';
var fs = require('fs');
var path = require('path');

var COMMONJS_BANNER = '// This file is autogenerated via the `commonjs` Grunt task. You can require() this file in a CommonJS environment.\n';

module.exports = function generateCommonJSModule(grunt, srcFiles, destFilepath) {
  var destDir = path.dirname(destFilepath);

  function srcPathToDestRequire(srcFilepath) {
    var requirePath = path.relative(destDir, srcFilepath).replace(/\\/g, '/');
    return 'require(\'' + requirePath + '\')';
  }

  var moduleOutputJs = COMMONJS_BANNER + srcFiles.map(srcPathToDestRequire).join('\n');
  try {
    fs.writeFileSync(destFilepath, moduleOutputJs);
  }
  catch (err) {
    grunt.fail.warn(err);
  }
  grunt.log.writeln('File ' + destFilepath.cyan + ' created.');
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJib290c3RyYXAvZ3J1bnQvYnMtY29tbW9uanMtZ2VuZXJhdG9yLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcbnZhciBmcyA9IHJlcXVpcmUoJ2ZzJyk7XG52YXIgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKTtcblxudmFyIENPTU1PTkpTX0JBTk5FUiA9ICcvLyBUaGlzIGZpbGUgaXMgYXV0b2dlbmVyYXRlZCB2aWEgdGhlIGBjb21tb25qc2AgR3J1bnQgdGFzay4gWW91IGNhbiByZXF1aXJlKCkgdGhpcyBmaWxlIGluIGEgQ29tbW9uSlMgZW52aXJvbm1lbnQuXFxuJztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBnZW5lcmF0ZUNvbW1vbkpTTW9kdWxlKGdydW50LCBzcmNGaWxlcywgZGVzdEZpbGVwYXRoKSB7XG4gIHZhciBkZXN0RGlyID0gcGF0aC5kaXJuYW1lKGRlc3RGaWxlcGF0aCk7XG5cbiAgZnVuY3Rpb24gc3JjUGF0aFRvRGVzdFJlcXVpcmUoc3JjRmlsZXBhdGgpIHtcbiAgICB2YXIgcmVxdWlyZVBhdGggPSBwYXRoLnJlbGF0aXZlKGRlc3REaXIsIHNyY0ZpbGVwYXRoKS5yZXBsYWNlKC9cXFxcL2csICcvJyk7XG4gICAgcmV0dXJuICdyZXF1aXJlKFxcJycgKyByZXF1aXJlUGF0aCArICdcXCcpJztcbiAgfVxuXG4gIHZhciBtb2R1bGVPdXRwdXRKcyA9IENPTU1PTkpTX0JBTk5FUiArIHNyY0ZpbGVzLm1hcChzcmNQYXRoVG9EZXN0UmVxdWlyZSkuam9pbignXFxuJyk7XG4gIHRyeSB7XG4gICAgZnMud3JpdGVGaWxlU3luYyhkZXN0RmlsZXBhdGgsIG1vZHVsZU91dHB1dEpzKTtcbiAgfVxuICBjYXRjaCAoZXJyKSB7XG4gICAgZ3J1bnQuZmFpbC53YXJuKGVycik7XG4gIH1cbiAgZ3J1bnQubG9nLndyaXRlbG4oJ0ZpbGUgJyArIGRlc3RGaWxlcGF0aC5jeWFuICsgJyBjcmVhdGVkLicpO1xufTtcbiJdLCJmaWxlIjoiYm9vdHN0cmFwL2dydW50L2JzLWNvbW1vbmpzLWdlbmVyYXRvci5qcyIsInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9